<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©server une Th√©rapie en Ligne Maroc | TherapieMarocOnline</title>
    <meta name="description"
        content="R√©servez votre s√©ance de th√©rapie en ligne Maroc avec un psychologue agr√©√©. Consultations TCC disponibles pour les Marocains du monde entier.">
    <meta name="keywords"
        content="r√©server th√©rapie en ligne maroc, rendez-vous psychologue maroc, consultation psy en ligne maroc, TCC maroc">

    <!-- CSS Shared -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <!-- FullCalendar -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>

    <style>
        body {
            font-family: 'DM Sans', sans-serif;
            background: #fff;
            color: var(--color-text);
        }

        .hero-mini {
            background: var(--color-primary);
            color: white;
            padding: 4rem 1rem;
            text-align: center;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        #calendar {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Customize FullCalendar events */
        .fc-event {
            background-color: var(--color-green) !important;
            /* Green for available */
            border: none;
            cursor: pointer;
            padding: 5px;
            font-size: 0.9rem;
            text-align: center;
        }

        .fc-event:hover {
            opacity: 0.8;
        }

        /* Modal for confirm */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 400px;
            text-align: center;
        }

        /* Premium Calendar Styles */
        .fc-theme-standard .fc-list-day-cushion {
            background-color: transparent !important;
            padding: 1.5rem 0 0.5rem 0 !important;
        }

        .fc .fc-list-day-text,
        .fc .fc-list-day-side-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--color-primary);
            text-decoration: none !important;
        }

        .fc-list-event {
            background: white !important;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid #eee;
        }

        .fc-list-event:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-color: var(--color-secondary);
        }

        .fc-list-event-time {
            font-weight: 700;
            color: var(--color-text);
            font-size: 1.1rem;
            padding: 1.5rem !important;
        }

        .fc-list-event-title {
            color: #666;
            font-size: 1rem;
        }

        .fc-list-event-graphic {
            display: none;
            /* Hide the little dot */
        }

        .fc-list-table {
            border-collapse: separate !important;
            border-spacing: 0 0.5rem !important;
        }

        .fc-list-table td {
            border: none !important;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <header class="navbar">
        <div class="container navbar-content">
            <a href="index.html" class="logo">
                <img src="img/logo.png" alt="TherapieMarocOnline" style="vertical-align: middle;">
            </a>

            <!-- Mobile Language Switcher (Visible on mobile only) -->
            <div class="mobile-lang-switcher">
                <a href="index_ar.html" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"
                    style="font-weight: 700; font-size: 1rem; padding: 0.5rem; border: 1px solid rgba(0,0,0,0.1); border-radius: 6px; background: rgba(255,255,255,0.5);">
                    AR
                </a>
            </div>

            <div class="burger-menu" id="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="services/index.html">Services</a></li>
                    <li><a href="equipe.html">√âquipe</a></li>
                    <li><a href="contact.html">Contact</a></li>

                    <!-- Mobile Only Items -->
                    <li class="mobile-only-item show-on-mobile">
                        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem;">
                            <a href="index.html" class="lang-link active" title="Fran√ßais">
                                <span style="font-size: 1.5rem;">üá´üá∑</span>
                            </a>
                            <a href="index_ar.html" class="lang-link" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
                                <span style="font-size: 1.5rem;">üá≤üá¶</span>
                            </a>
                        </div>
                    </li>
                    <li class="mobile-only-item show-on-mobile">
                        <a href="rdv.html" class="btn btn-primary"
                            style="width: 100%; text-align: center; justify-content: center;">Prendre RDV</a>
                    </li>
                </ul>
            </nav>
            <a href="rdv.html" class="btn btn-primary nav-cta desktop-only">Prendre RDV</a>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <script>
        const burger = document.getElementById('burger');
        const nav = document.querySelector('.nav-links');
        const overlay = document.getElementById('mobileOverlay');
        const navLinks = document.querySelectorAll('.nav-links a');

        // Toggle menu
        function toggleMenu() {
            nav.classList.toggle('nav-active');
            burger.classList.toggle('toggle');
            overlay.classList.toggle('active');
            document.body.style.overflow = nav.classList.contains('nav-active') ? 'hidden' : '';
        }

        // Open/close on burger click
        burger.addEventListener('click', toggleMenu);

        // Close on overlay click
        overlay.addEventListener('click', toggleMenu);

        // Close on link click
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (nav.classList.contains('nav-active')) {
                    toggleMenu();
                }
            });
        });

        // Close on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && nav.classList.contains('nav-active')) {
                toggleMenu();
            }
        });
    </script>

    <main>
        <!-- Hero & Context -->
        <section class="hero-mini" style="background-color: #f9f7f2; color: var(--color-text); padding: 4rem 1rem;">
            <div class="container">
                <h1 class="mb-lg">Commencez votre accompagnement</h1>

                <!-- Pricing Grid -->
                <div class="grid grid-3" style="margin-bottom: 3rem; text-align: left;">
                    <div class="card" style="border-top: 4px solid var(--color-secondary);">
                        <h3>S√©ance Individuelle</h3>
                        <p class="text-sm" style="color: #666; margin-bottom: 1rem;">Pour consulter ponctuellement.</p>
                        <div style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">250 DH <small
                                style="font-size: 1rem; font-weight: normal;">/ s√©ance</small></div>
                        <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                            <li>‚úî 45 - 60 min</li>
                            <li>‚úî Visio s√©curis√©e</li>
                            <li>‚úî Paiement √† la s√©ance</li>
                        </ul>
                    </div>

                    <div class="card" style="border-top: 4px solid var(--color-primary); background: #fff;">
                        <span
                            style="background: var(--color-secondary); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; float: right;">Populaire</span>
                        <h3>Pack Duo</h3>
                        <p class="text-sm" style="color: #666; margin-bottom: 1rem;">2 S√©ances d'accompagnement.</p>
                        <div style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">450 DH <small
                                style="font-size: 1rem; font-weight: normal;">/ le pack</small></div>
                        <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                            <li>‚úî Soit 225 DH / s√©ance</li>
                            <li>‚úî Id√©al pour commencer</li>
                            <li>‚úî Valable 1 mois</li>
                        </ul>
                    </div>

                    <div class="card" style="border-top: 4px solid #333;">
                        <h3>Pack Suivi</h3>
                        <p class="text-sm" style="color: #666; margin-bottom: 1rem;">4 S√©ances pour avancer.</p>
                        <div style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">800 DH <small
                                style="font-size: 1rem; font-weight: normal;">/ le pack</small></div>
                        <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                            <li>‚úî Soit 200 DH / s√©ance</li>
                            <li>‚úî Engagement sur la dur√©e</li>
                            <li>‚úî Valable 2 mois</li>
                        </ul>
                    </div>
                </div>

                <!-- WhatsApp Pre-Calendar CTA -->
                <div class="text-center mb-lg"
                    style="background: #e8f5e9; padding: 1.5rem; border-radius: 8px; border: 1px solid #c8e6c9; max-width: 600px; margin: 0 auto 2rem auto;">
                    <p style="color: #2e7d32; font-weight: 500; margin-bottom: 0.5rem;">Besoin d'aide ou d'une info
                        avant de r√©server ?</p>
                    <a href="https://wa.me/212663056341?text=Bonjour,%20je%20voudrais%20savoir%20comment%20on%20proc%C3%A8de."
                        target="_blank" class="btn btn-gradient-whatsapp" style="font-size: 0.95rem;">
                        <svg style="width: 18px; height: 18px; fill: white; margin-right: 8px;"
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                            <path
                                d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z" />
                        </svg>
                        Discussion instantan√©e WhatsApp
                    </a>
                </div>
                <button id="showCalendarBtn" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">
                    Voir les disponibilit√©s
                </button>
                <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                    Aucun paiement en ligne requis pour r√©server.
                </p>
            </div>

            <!-- Hidden Calendar Section -->
            <div id="calendarSection"
                style="display: none; margin-top: 3rem; border-top: 1px solid #ddd; padding-top: 3rem; opacity: 0; transition: opacity 0.5s ease;">
                <h2 class="text-center" style="margin-bottom: 2rem;">Choisissez votre cr√©neau</h2>
                <div id="calendar"
                    style="max-width: 900px; margin: 0 auto; background: white; padding: 1rem; border-radius: 8px; box-shadow: var(--shadow);">
                </div>
            </div>
            </div>
        </section>

        <!-- Booking Modal (Hidden by default) -->
        <div id="bookingModal" class="modal">
            <div class="modal-content">
                <h3 style="color: var(--color-primary); margin-bottom: 1rem;">Confirmer la r√©servation</h3>
                <p id="modalDate" style="font-weight: bold; font-size: 1.1rem; margin-bottom: 0.5rem;"></p>
                <p style="color: #666; margin-bottom: 1.5rem;">Consultation Vid√©o</p>

                <div
                    style="background: #fff3e0; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; text-align: left; font-size: 0.9rem;">
                    <strong>‚ö†Ô∏è Important :</strong><br>
                    Pour bloquer ce cr√©neau, un acompte est requis via Wafacash ou Virement.
                </div>

                <button id="confirmWaBtn" class="btn btn-gradient-whatsapp"
                    style="width: 100%; justify-content: center;">
                    <svg style="width: 20px; height: 20px; fill: white; margin-right: 8px;"
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                        <path
                            d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z" />
                    </svg>
                    Valider sur WhatsApp
                </button>
                <button id="closeModalBtn"
                    style="margin-top: 1rem; background: none; border: none; text-decoration: underline; cursor: pointer; color: #666;">Annuler</button>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const calendarEl = document.getElementById('calendar');
            const section = document.getElementById('calendarSection');
            const btn = document.getElementById('showCalendarBtn');
            let calendarInitialized = false;

            btn.addEventListener('click', function () {
                // Show section
                section.style.display = 'block';
                // Trigger reflow
                section.offsetHeight;
                section.style.opacity = '1';

                btn.style.display = 'none'; // Hide button after click

                if (!calendarInitialized) {
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        initialView: 'listWeek',
                        locale: 'fr',
                        headerToolbar: {
                            left: 'prev,next today',
                            center: 'title',
                            right: 'listWeek'
                        },
                        views: {
                            listWeek: { buttonText: 'Semaine' }
                        },
                        validRange: function (nowDate) {
                            return {
                                start: nowDate,
                                end: new Date(nowDate.valueOf() + 21 * 24 * 60 * 60 * 1000) // 3 weeks
                            };
                        },
                        noEventsContent: 'Aucun cr√©neau disponible cette semaine.',
                        events: 'api/slots.php',
                        eventClick: function (info) {
                            let date = info.event.start;
                            let dateStr = date.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long', hour: '2-digit', minute: '2-digit' });

                            // Populate Modal
                            document.getElementById('modalDate').textContent = dateStr;

                            // Show Modal
                            const modal = document.getElementById('bookingModal');
                            modal.style.display = 'flex';

                            // Confirm Action
                            document.getElementById('confirmWaBtn').onclick = function () {
                                // Include Slot ID for manual tracking
                                let slotId = info.event.id || 'N/A';
                                let message = "Bonjour, je souhaite r√©server le cr√©neau du " + dateStr + " (Ref: " + slotId + ").";
                                let waLink = "https://wa.me/212663056341?text=" + encodeURIComponent(message);
                                window.open(waLink, '_blank');
                                modal.style.display = 'none';
                            };

                            // Close Action
                            document.getElementById('closeModalBtn').onclick = function () {
                                modal.style.display = 'none';
                            };

                            // Click outside to close
                            window.onclick = function (event) {
                                if (event.target == modal) {
                                    modal.style.display = "none";
                                }
                            }
                        },
                        height: 'auto'
                    });
                    calendar.render();
                    calendarInitialized = true;
                }

                section.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
    <script src="/psymaroc/js/whatsapp-button.js"></script>
</body>

</html>