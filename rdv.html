<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prendre Rendez-vous - TherapieMarocOnline</title>

    <!-- CSS Shared -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <!-- FullCalendar -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>

    <style>
        body {
            font-family: 'DM Sans', sans-serif;
            background: #fff;
            color: var(--color-text);
        }

        .hero-mini {
            background: var(--color-primary);
            color: white;
            padding: 4rem 1rem;
            text-align: center;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        #calendar {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Customize FullCalendar events */
        .fc-event {
            background-color: var(--color-green) !important;
            /* Green for available */
            border: none;
            cursor: pointer;
            padding: 5px;
            font-size: 0.9rem;
            text-align: center;
        }

        .fc-event:hover {
            opacity: 0.8;
        }

        /* Modal for confirm */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 400px;
            text-align: center;
        }

        /* Premium Calendar Styles */
        .fc-theme-standard .fc-list-day-cushion {
            background-color: transparent !important;
            padding: 1.5rem 0 0.5rem 0 !important;
        }

        .fc .fc-list-day-text,
        .fc .fc-list-day-side-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--color-primary);
            text-decoration: none !important;
        }

        .fc-list-event {
            background: white !important;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid #eee;
        }

        .fc-list-event:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-color: var(--color-secondary);
        }

        .fc-list-event-time {
            font-weight: 700;
            color: var(--color-text);
            font-size: 1.1rem;
            padding: 1.5rem !important;
        }

        .fc-list-event-title {
            color: #666;
            font-size: 1rem;
        }

        .fc-list-event-graphic {
            display: none;
            /* Hide the little dot */
        }

        .fc-list-table {
            border-collapse: separate !important;
            border-spacing: 0 0.5rem !important;
        }

        .fc-list-table td {
            border: none !important;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <header class="navbar">
        <div class="container navbar-content">
            <a href="index.html" class="logo">
                <img src="img/logo.png" alt="TherapieMarocOnline" style="vertical-align: middle;">
            </a>

            <div class="burger-menu" id="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="services/index.html">Services</a></li>
                    <li><a href="equipe.html">Équipe</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <a href="rdv.html" class="btn btn-primary nav-cta">Prendre RDV</a>
        </div>
    </header>

    <script>
        const burger = document.getElementById('burger');
        const nav = document.querySelector('.nav-links');

        burger.addEventListener('click', () => {
            nav.classList.toggle('nav-active');
            burger.classList.toggle('toggle');
        });
    </script>

    <main>
        <!-- Hero & Context -->
        <section class="hero-mini" style="background-color: #f9f7f2; color: var(--color-text); padding: 4rem 1rem;">
            <div class="container">
                <h1 class="mb-lg">Commencez votre accompagnement</h1>

                <!-- Pricing Grid -->
                <div class="grid grid-3" style="margin-bottom: 3rem; text-align: left;">
                    <div class="card" style="border-top: 4px solid var(--color-secondary);">
                        <h3>Séance Individuelle</h3>
                        <p class="text-sm" style="color: #666; margin-bottom: 1rem;">Pour consulter ponctuellement.</p>
                        <div style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">250 DH <small
                                style="font-size: 1rem; font-weight: normal;">/ séance</small></div>
                        <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                            <li>✔ 45 - 60 min</li>
                            <li>✔ Visio sécurisée</li>
                            <li>✔ Paiement à la séance</li>
                        </ul>
                    </div>

                    <div class="card" style="border-top: 4px solid var(--color-primary); background: #fff;">
                        <span
                            style="background: var(--color-secondary); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; float: right;">Populaire</span>
                        <h3>Pack Duo</h3>
                        <p class="text-sm" style="color: #666; margin-bottom: 1rem;">2 Séances d'accompagnement.</p>
                        <div style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">450 DH <small
                                style="font-size: 1rem; font-weight: normal;">/ le pack</small></div>
                        <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                            <li>✔ Soit 225 DH / séance</li>
                            <li>✔ Idéal pour commencer</li>
                            <li>✔ Valable 1 mois</li>
                        </ul>
                    </div>

                    <div class="card" style="border-top: 4px solid #333;">
                        <h3>Pack Suivi</h3>
                        <p class="text-sm" style="color: #666; margin-bottom: 1rem;">4 Séances pour avancer.</p>
                        <div style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem;">800 DH <small
                                style="font-size: 1rem; font-weight: normal;">/ le pack</small></div>
                        <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                            <li>✔ Soit 200 DH / séance</li>
                            <li>✔ Engagement sur la durée</li>
                            <li>✔ Valable 2 mois</li>
                        </ul>
                    </div>
                </div>

                <div class="text-center">
                    <button id="showCalendarBtn" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">
                        Voir les disponibilités
                    </button>
                    <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                        Aucun paiement en ligne requis pour réserver.
                    </p>
                </div>

                <!-- Hidden Calendar Section -->
                <div id="calendarSection"
                    style="display: none; margin-top: 3rem; border-top: 1px solid #ddd; padding-top: 3rem; opacity: 0; transition: opacity 0.5s ease;">
                    <h2 class="text-center" style="margin-bottom: 2rem;">Choisissez votre créneau</h2>
                    <div id="calendar"
                        style="max-width: 900px; margin: 0 auto; background: white; padding: 1rem; border-radius: 8px; box-shadow: var(--shadow);">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const calendarEl = document.getElementById('calendar');
            const section = document.getElementById('calendarSection');
            const btn = document.getElementById('showCalendarBtn');
            let calendarInitialized = false;

            btn.addEventListener('click', function () {
                // Show section
                section.style.display = 'block';
                // Trigger reflow
                section.offsetHeight;
                section.style.opacity = '1';

                btn.style.display = 'none'; // Hide button after click

                if (!calendarInitialized) {
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        initialView: 'listWeek',
                        locale: 'fr',
                        headerToolbar: {
                            left: 'prev,next today',
                            center: 'title',
                            right: 'listWeek'
                        },
                        views: {
                            listWeek: { buttonText: 'Semaine' }
                        },
                        validRange: function (nowDate) {
                            return {
                                start: nowDate,
                                end: new Date(nowDate.valueOf() + 21 * 24 * 60 * 60 * 1000) // 3 weeks
                            };
                        },
                        noEventsContent: 'Aucun créneau disponible cette semaine.',
                        events: 'api/slots.php',
                        eventClick: function (info) {
                            let date = info.event.start;
                            let dateStr = date.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long', hour: '2-digit', minute: '2-digit' });

                            let confirmBooking = confirm("Voulez-vous réserver le créneau du " + dateStr + " ?\n\nCela ouvrira WhatsApp pour finaliser avec M. Bouchemmama.");

                            if (confirmBooking) {
                                let message = "Bonjour, je souhaite réserver le créneau du " + dateStr + ".";
                                let waLink = "https://wa.me/212663056341?text=" + encodeURIComponent(message);
                                window.open(waLink, '_blank');
                            }
                        },
                        height: 'auto'
                    });
                    calendar.render();
                    calendarInitialized = true;
                }

                section.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
    <script src="/psymaroc/js/whatsapp-button.js"></script>
</body>

</html>